<!doctype html>
<html class="no-js">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>订单列表</title>
<meta name="description" content="这是一个 index 页面">
<meta name="keywords" content="index">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta http-equiv="Cache-Control" content="no-siteapp" />
<link rel="icon" type="image/png" href="assets/i/favicon.png">
<link rel="apple-touch-icon-precomposed" href="assets/i/app-icon72x72@2x.png">
<meta name="apple-mobile-web-app-title" content="Amaze UI" />
<link rel="stylesheet" href="assets/css/amazeui.min.css"/>
<link rel="stylesheet" href="assets/css/admin.css">
<script src="assets/js/jquery.min.js"></script>
<script src="assets/js/app.js"></script>
<link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
<!--<link rel="stylesheet" href="static/css/bootstrap.css" />-->
<script src="static/js/utils.js"></script>
		<!-- 引入 layui.css -->
		<link rel="stylesheet" href="static/css/layui.css">
		<!-- 引入 layui.js -->
		<script src="static/js/layui.js"></script>
<!--<link href="static/css/personal.css" rel="stylesheet" type="text/css">-->
<link href="static/css/systyle.css" rel="stylesheet" type="text/css">

<!-- 引入样式 -->

</head>
<body>
<!--[if lte IE 9]><p class="browsehappy">升级你的浏览器吧！ <a href="http://se.360.cn/" target="_blank">升级浏览器</a>以获得更好的体验！</p><![endif]-->


</head>

<body>
<header class="am-topbar admin-header">
  <div class="am-topbar-brand"><img src="assets/i/logo.png"></div>

  <div class="am-collapse am-topbar-collapse" id="topbar-collapse">
    <ul class="am-nav am-nav-pills am-topbar-nav admin-header-list">

    </ul>
  </div>
</header>

<div class="am-cf admin-main"> 


 <div class="nav-navicon admin-main admin-sidebar">
    
    
    <div class="sideMenu am-icon-dashboard" style="color:#aeb2b7; margin: 10px 0 0 0;"> 欢迎系统管理员</div>
    <div class="sideMenu" style="font-size: 1.4rem;">
    	<h3 class="am-icon-users"><em></em> <a href="#">用户管理</a></h3>
      <ul>
         <li class="func" dataType='html' dataLink='msn.htm' iconImg='images/msn.gif'><a href="用户列表.html">用户列表</a></li>
         <li class="func" dataType='html' dataLink='msn.htm' iconImg='images/msn.gif'><a href="添加用户.html">添加用户</a></li>
      </ul>
      <h3 class="am-icon-flag"><em></em> <a href="#">商品管理</a></h3>
      <ul>
        <li class="func" dataType='html' dataLink='msn.htm' iconImg='images/msn.gif'><a href="商品列表.html">商品列表</a></li>
        <li class="func" dataType='html' dataLink='msn.htm' iconImg='images/msn.gif'><a href="添加新商品.html">添加新商品</a></li>
        <li class="func" dataType='html' dataLink='msn.htm' iconImg='images/msn.gif'><a href="商品统计.html">商品统计</a></li>
      </ul>
        <h3 class="am-icon-gears"><em></em> <a href="#">商品分类管理</a></h3>
      <ul>
        <li class="func" dataType='html' dataLink='msn.htm' iconImg='images/msn.gif'><a href="商品分类.html">商品分类</a></li>
         <li class="func" dataType='html' dataLink='msn.htm' iconImg='images/msn.gif'><a href="添加商品分类.html">添加商品分类</a></li>       
      </ul>    
      <h3 class="am-icon-cart-plus on"><em></em> <a href="订单列表.html"> 订单管理</a></h3>
      <ul>
         <li class="func" dataType='html' dataLink='msn.htm' iconImg='images/msn.gif'><a href="订单列表.html">订单列表</a></li>
 				 <li class="func" dataType='html' dataLink='msn.htm' iconImg='images/msn.gif'><a href="订单统计.html">订单统计</a></li>
      </ul>
      <h3 class="am-icon-volume-up"><em></em> <a href="#">评论管理</a></h3>
      <ul>
         <li class="func" dataType='html' dataLink='msn.htm' iconImg='images/msn.gif'><a href="评论列表.html">评论列表</a></li>
 				 <li class="func" dataType='html' dataLink='msn.htm' iconImg='images/msn.gif'><a href="评论统计.html">评论统计</a></li>
      </ul>
    
    </div>
    <!-- sideMenu End --> 
    
   <script type="text/javascript">
			jQuery(".sideMenu").slide({
				titCell:"h3", //鼠标触发对象
				targetCell:"ul", //与titCell一一对应，第n个titCell控制第n个targetCell的显示隐藏
				effect:"slideDown", //targetCell下拉效果
				delayTime:300 , //效果时间
				triggerTime:150, //鼠标延迟触发时间（默认150）
				defaultPlay:true,//默认是否执行效果（默认true）
				returnDefault:true //鼠标从.sideMen移走后返回默认状态（默认false）
				});
		</script> 








</div>

</div>




</div>


    
    
    
    
    

  
    
    
    
    
    
    
</div>

<div class=" admin-content">
	
		<div class="daohang">
			<ul>
				<li><button type="button" class="am-btn am-btn-default am-radius am-btn-xs"> 首页 </li>
				<li><button type="button" class="am-btn am-btn-default am-radius am-btn-xs">用户管理<a href="javascript: void(0)" class="am-close am-close-spin" data-am-modal-close="">×</a></button></li>
				<li><button type="button" class="am-btn am-btn-default am-radius am-btn-xs">商品管理<a href="javascript: void(0)" class="am-close am-close-spin" data-am-modal-close="">×</a></button></li>
				<li><button type="button" class="am-btn am-btn-default am-radius am-btn-xs">订单管理<a href="javascript: void(0)" class="am-close am-close-spin" data-am-modal-close="">×</a></button></li>
				
				
			</ul>

       

	
</div>
	
	


<div class="admin-biaogelist">
	
    <div class="listbiaoti am-cf">
      <ul class="am-icon-flag on"> 订单列表</ul>
      
      <dl class="am-icon-home" style="float: right;"> 当前位置： 首页 > <a href="订单列表.html">订单列表</a></dl>
      
      <dl>
        
      </dl>
      
      
    </div>
	 <div id="container">
	 	<div class="m-order" style="margin-bottom: 0px; font-size: 14px; ">

				<ul>
					<li style="width: 20%; list-style-type: none;">
						<a @click="queryByStatus(1)"><i><img src="static/images/pay.png"></i> <span>待付款<em class="m-num" style="display: none;">0</em></span></a>
					</li>
					<li style="width: 20%; list-style-type: none;">
						<a @click="queryByStatus(2)"><i><img src="static/images/send.png"></i> <span>待发货<em class="m-num" style="display: none;">0</em></span></a>
					</li>
					<li style="width: 20%; list-style-type: none;">
						<a  @click="queryByStatus(3)"><i><img src="static/images/receive.png"></i> <span>待收货<em class="m-num" style="display: none;">0</em></span></a>
					</li>
					<li style="width: 20%; list-style-type: none;">
						<a  @click="queryByStatus(4)"><i><img src="static/images/comment.png"></i> <span>待评价<em class="m-num" style="display: none;">0</em></span></a>
					</li>
					<li style="width: 20%; list-style-type: none;">
						<a  @click="queryByStatus(6)"><i><img src="static/images/comment.png"></i> <span>已关闭<em class="m-num" style="display: none;">0</em></span></a>
					</li>
				</ul>
			</div>
    			<div class="box-container-bottom" style="margin-bottom: 15px;"></div>
	<el-table  :data="orders"  border fit highlight-current-row>
					      <el-table-column
					        label="序号"
					        width="100"
					        align="center">
					        <template slot-scope="scope">
					          {{ (pageNum - 1) * limit + scope.$index + 1 }}
					        </template>
					      </el-table-column>
					      <el-table-column label="订单编号" width="300">
					        <template slot-scope="scope">
					          {{scope.row.orderId}}
					        </template>
					      </el-table-column>					
					
					      <el-table-column label="订单商品" width="250">
					        <template slot-scope="scope">
					          {{scope.row.untitled.substring(0,scope.row.untitled.length-1)}}
					        </template>
					      </el-table-column>
					
					      <el-table-column label="订单状态" width="150">
					        <template slot-scope="scope">
					          <!---->
					          <span v-if="scope.row.status == '1'">待付款</span>
									<span v-else-if="scope.row.status == '2'">待发货</span>
									<span v-else-if="scope.row.status == '3'">待收货</span>
									<span v-else-if="scope.row.status == '4'">待评价</span>
									<span v-else-if="scope.row.status == '5'">已完成</span>
									<span v-else-if="scope.row.status == '6'">已关闭</span>
					        </template>
					      </el-table-column>
					      <el-table-column label="创建时间" width="260">
					        <template slot-scope="scope">
					          {{scope.row.createTime | time}}
					         
					        </template>
					      </el-table-column>
					      <el-table-column  label="操作" sortable width="260">
					      	<template slot-scope="scope">
					      <template v-if="scope.row.status == '1'">
							 	<el-button type="primary" plain  size="mini" style="margin-left: 10px;">待付款</el-button>
									</template>
									<template v-if="scope.row.status == '2'">
										<el-button  size="mini" style="margin-left: 10px;" @click="fahuo(scope.row) " type="success"  plain>发货商品</el-button>
									</template>
									<template v-if="scope.row.status == '3'">
									 <el-button type="success" plain  size="mini" style="margin-left: 10px;">待收货</el-button>
									</template>
									<template v-if="scope.row.status == '4'">
									<el-button type="warning" plain  size="mini" style="margin-left: 10px;">待评价</el-button>
									</template>
									<template v-if="scope.row.status == '5' || scope.row.status == '6'">
									<el-button type="danger" size="mini" @click="shanchu(scope.row) " style="margin-left: 10px;"plain>删除</el-button>
									</template>
									</template>
									</el-table-column>

					

					    </el-table>
<div style="text-align: center">
							<el-pagination background layout="prev, pager, next" 
               :current-page="pageNum"
               :page-size="limit" 
               :total="count" @current-change="pager" > </el-pagination>
</div>
</div>




</div>

</div>




</div>

<!--[if lt IE 9]>
<script src="http://libs.baidu.com/jquery/1.11.1/jquery.min.js"></script>
<script src="http://cdn.staticfile.org/modernizr/2.8.3/modernizr.js"></script>
<script src="assets/js/polyfill/rem.min.js"></script>
<script src="assets/js/polyfill/respond.min.js"></script>
<script src="assets/js/amazeui.legacy.js"></script>
<![endif]--> 

<!--[if (gte IE 9)|!(IE)]><!--> 
<script src="assets/js/amazeui.min.js"></script>
<!--<![endif]-->

		<script type="text/javascript" src="static/js/cookie_utils.js" ></script>
		<script type="text/javascript" src="static/js/axios.min.js" ></script>
		<script type="text/javascript" src="static/js/vue.js" ></script>
		<!-- 引入组件库 -->
		<script src="https://unpkg.com/element-ui/lib/index.js"></script>
		<script type="text/javascript" src="static/js/base.js" ></script>
		<script type="text/javascript">
			var v = new Vue({
				el:"#container",
				data:{
					pageNum:1,
					limit:6,
					orders:[],
					count:0,
					status:null
				},
				created:function(){
					//1.加载页面，请求订单信息
					var url1 = baseUrl+"order/list-all";
					axios({
						url:url1,
						method:"get",
						params:{
							pageNum:this.pageNum,
							limit:this.limit
						}
					}).then((res)=>{
						console.log(res.data.data);
						if(res.data.code == 10000){
							
							this.orders = res.data.data.list;
							this.count = res.data.data.count;
						}
					});
				},
				methods:{
					pager:function(page){
						this.pageNum = page;
						//1.加载页面，请求订单信息
						var url1 = baseUrl+"order/list-all";
						var obj = {
								pageNum:this.pageNum,
								limit:this.limit
						};
						if(this.status!=null){
							obj.status = this.status;
						}
						axios({
							url:url1,
							method:"get",

							params:obj
						}).then((res)=>{
							console.log(res.data.data);
							if(res.data.code == 10000){
								this.orders = res.data.data.list;
								this.count = res.data.data.count;
							}
						});
					},
					queryByStatus:function(status){
						this.pageNum = 1;
						this.status = status;
						console.log(this.status);
						var url1 = baseUrl+"order/list-all";
						axios({
							url:url1,
							method:"get",
							params:{
								pageNum:this.pageNum,
								limit:this.limit,
								status:this.status
							}
						}).then((res)=>{
							console.log(res.data.data);
							if(res.data.code == 10000){
								this.orders = res.data.data.list;
								this.count = res.data.data.count;
							}
						});
					},
						 shanchu(val){
							this.$confirm('是否确认删除订单?', '提示', {
							         cancelButtonText: '取消',							         
							         confirmButtonText: '确定',
							          type: 'warning'
							        }).then(() => {
							       
							    this.orderId=val.orderId;
										var url3 = baseUrl+"order/deleteOrder/"+this.orderId;
									 axios.get(url3).then((res)=>{
									});	
							          this.$message({
							            type: 'success',
							            message: '删除成功!'
							          });
									 setTimeout(function (){
										window.location.href="订单列表.html";
									}, 500);		          
							        }).catch(() => {
							          this.$message({
							            type: 'info',
							            message: '已取消删除'
							          });          
							        });
						  },  	
						 fahuo(val){
							    this.orderId=val.orderId;
										var url5 = baseUrl+"order/setOrder/"+this.orderId;
									 axios.get(url5).then((res)=>{
									});	
							          this.$message({
							            type: 'success',
							            message: '发货成功!'
							          });
									 setTimeout(function (){
										window.location.href="订单列表.html";
									}, 500);		          

						  },  			

				},
				
				filters: {
            time: (value) => {
            	return rTime(value);
            }
        }
			});
			
		</script>


</body>
</html>